# CPU位数和操作系统位数

## CPU位数

CPU位数：一个时钟周期内CPU处理的二进制位数，也即CPU一次并行处理的数据宽度

一般CPU的寄存器长度会和CPU位数相同，总线长度一般也会相同，但也有可能不同

CPU支持的指令集是多少位，CPU就要做成多少位，但CPU也会向下兼容更小位数的指令集

字长一般就指CPU位数

## 操作系统位数

操作系统位数：操作系统运行所依赖的指令集位数

## 内存容量的影响因素

### 1. 硬件

早期三总线结构：数据线、地址线、控制线  
现代总线：时分复用（如PCI总线）

地址总线决定物理地址的最大寻址范围

对于32位CPU，一般地址总线为32位，但也有一些32位CPU有36位地址总线（如服务器U）  
对于64位CPU，一般地址总线就有36位或40位

### 2. 操作系统

操作系统中关于地址有如下概念（具体看CSAPP，此处可能有误）：
1. 物理地址：内存条提供的实际内存，地址总线位数决定其最大容量
2. 线性地址：由内存分页技术引入。开启分页机制后，线性地址可以比物理地址大，被挂起的进程只分配到线性地址，原来在物理内存中的内容被转储到硬盘中，为其他进程腾出物理地址空间
3. 逻辑地址：分段机制提供的地址，线性地址 = 段基址 + 偏移地址。逻辑地址是相对于当前进程数据段的地址，与物理地址无关，这保证了进程只能操作自己的逻辑地址

逻辑地址经过段式映射到线性地址  
线性地址经过页面映射到物理地址

32位Windows编码逻辑地址时使用了32位（和它是32位系统无关），即4G的逻辑地址空间  
并且Intelx86架构下采用内存映射技术，4GB逻辑地址中一部分要划分出来与BIOS ROM、CPU寄存器、I/O设备这些部件的物理地址进行映射，因此实际可使用的逻辑地址空间会低于4G
